#### node
> 1 node 基于V8的Javascript运行环境<br>
  2 单线程 非阻塞I/O（数据库的请求不会阻塞主线程）<br>
  3 事件驱动
##### node 优点
- 节约内存
- 节约上下文环境 context切换开支
- 并发资源的处理，无需加锁

##### 进程 
> 操作系统分配资源和调度任务的基本单位，一个进程可以有多个线程

##### 浏览器模型
- 用户界面
- 渲染引擎（JS线程 UI线程）
- 浏览器引擎 在用户界面和渲染引擎之间传送指令
- 网络请求
- 数据存储 持久层
![avatar](./browser.jpg)
> webworker 多线程 完全受主线程控制，不能操作DOM

##### 浏览器 eventloop
- 所有同步任务在主线程执行，形成一个执行栈
- 异步任务队列  先进先出 （主线程之外），异步任务有运行结果以后向异步队列添加一个事件任务
- 执行栈中所有的同步任务执行完毕，系统会读取异步任务队列中的一个任务到执行栈执行

![avatar](./eventloop.png)

##### nodeJs 中 eventloop
![avatar](./nodesystem.png)
> 1 v8解析javascript脚本<br>
  2 解析后的代码 调用node api<br>
  3libuv库负责node api 的执行，将不同的任务分配给不同的线程，形成一个事件循环(eventloop)，以异步的方式将任务的执行结果返回给v8引擎<br>
  4 v8引擎再将结果返回给用户
##### 同步/异步
> 关注的是消息通知的方式

> 同步：调用者主动等待返回结果
> 异步：调用者调用以后立马返回，不会等待结果，被调用者通过状态 通知或者回调函数处理这个调用
##### 阻塞和非阻塞
> 关注的是程序在等待结果时的状态

> 阻塞：调用结果返回之前，当前线程会被挂起，调用线程只有在得到结果之后才会返回
> 非阻塞：在不能立刻得到结果之前，该调用不会阻塞当前线程

> 同步/异步 取决于被调用者
> 阻塞/非阻塞 取决于调用者



