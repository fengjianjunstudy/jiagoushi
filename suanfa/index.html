<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        //冒泡算法
        function bubbleSort(arr){
            let len = arr.length;
            for(let i=0;i<len;i++){
                for(let j = 0;j<len-1-i;j++){
                    if(arr[j] > arr[j+1]){
                        [arr[j],arr[j+1]] = [arr[j+1],arr[j]]
                    }
                }
            }
            return arr;
        }
        let s = [5,4,3,2,1]
        //console.log(bubbleSort(s))
        //选择算法
        function selectSort(arr){
            let len = arr.length;
            let indexMin;
            for(let i=0;i<len-1;i++){
                indexMin = i; 
                for(let j = i;j<len;j++){
                    if(arr[j] < arr[indexMin]){
                        indexMin = j;
                    }
                }
                if(i != indexMin){
                    [arr[i],arr[indexMin]] = [arr[indexMin],arr[i]]
                }
            }
           
            return arr ;
        }
        //console.log(selectSort(s));
        //插入排序
        function insertSort(arr){
            let len = arr.length;
            let temp ,j;
            for(let i = 1;i<len;i++){
                j = i;
                temp = arr[i];
                while(j>0&&arr[j-1]>temp){
                    arr[j] = arr[j-1];
                    j--;
                }
                arr[j] = temp;

            }
            return arr;
        }
        //console.log(insertSort(s))
        //快速排序
        function swap(arr,left,right){
            [arr[left],arr[right]] = [arr[right],arr[left]]
        }
        function sort(array) {
            quickSort(array, 0, array.length - 1);
            return array;
        }

        function quickSort(array, left, right) {
            if (left < right) {
                swap(array,left , right)
                // 随机取值，然后和末尾交换，这样做比固定取一个位置的复杂度略低
                let l = part(array, left,right);
                quickSort(array, left, l -1);
                quickSort(array, l + 1, right);
            }
        }
        function part(array, left, right) {
            let mid = array[Math.floor((left+right)/2)]
            let i = left;
            let j = right;
            while(i<=j){
                while(array[i] < mid){
                    i++;
                }
                while(array[j] > mid){
                    j--;
                }
                if(i <= j){
                    swap(array,i,j)
                    i++;
                    j--;
                }
            }
            return i;
        }
        console.log(sort(s))
        //二分查找
        function binarySearch(arr,item){
            let low = 0;
            let high = arr.length -1;
            let mid;
            let index;
            while(low <= high){
                mid = Math.floor((low+high)/2)
                if(item<arr[mid]){
                    high = mid -1;
                }else if(item >arr[mid]){
                    low = mid +1;
                }else{
                    return mid;
                }
            }
            return -1;
        }
        let arr = [1,2,3,4,5,6,7,8,9]
        console.log(binarySearch(arr,6))
        console.log(binarySearch(arr,10))

        //阿里
        var arr11 = [
           {name:'小米1', value: 1,  type: 2, date: '2018-06-07T08:00:01.589Z' },
           {name:'锤子T1', value: 1, type: 2, date: '2018-06-07T08:10:01.589Z' },
           {name:'小米2', value: 1, type: 4, date: '2018-06-07T20:00:01.589Z' },
           {name:'小米2', value: 4, type: 4, date: '2018-06-07T20:10:21.189Z' },
           {name:'小米4', value: 1, type: 4, date: '2018-06-07T08:00:01.560Z' },
           {name:'小米4', value: 2, type: 4, date: '2018-06-07T08:10:31.584Z' },
           {name:'小米6', value: 1, type: 3, date: '2018-06-07T08:00:01.589Z' },
           {name:'小米5s',value: 1, type: 4, date: '2018-06-07T08:00:01.589Z' },
           {name:'锤子T2', value: 1, type: 4, date: '2018-06-07T08:00:01.589Z' },
           {name:'锤子T1', value: 4, type: 4, date: '2018-06-07T08:06:01.589Z' },
           {name:'魅蓝note5', value: 1, type: 4, date: '2018-06-07T08:00:01.589Z' },
           {name:'魅蓝note2', value: 5, type: 4, date: '2018-06-02T08:07:01.589Z' },
           {name:'魅蓝note2', value: 6, type: 4, date: '2018-06-07T08:00:01.589Z' },
           {name:'魅蓝note3', value: 1, type: 4, date: '2018-06-05T08:00:01.589Z' },
           {name:'魅蓝note', value: 1, type: 4, date: '2018-06-07T08:00:01.589Z' },
           {name:'oppor9', value: 7, type: 4, date: '2018-06-04T08:04:01.588Z' },
           {name:'华为p9', value: 1, type: 4, date: '2018-06-02T08:00:01.577Z' },
           {name:'华为p9', value: 2, type: 4, date: '2018-06-07T08:00:01.110Z' },
           {name:'华为p10', value: 1, type: 1, date: '2018-06-07T08:00:01.534Z' }
        ];
 
        /**
        * 请用您认为最优化的方式，将arr中的type为4的数据过滤出来，
        * 然后按相同的 name + date（按天）合并value（value累加），
        * 然后按 value 降序(从大到小)排序，
        * 最后每行按照 "${name},${本地日期},售出${sum(value)}部" 的格式，如："小米2,2017年06月08日,售出5部", 打印(console.log)出来。
         
        * 可以使用第三方js库，可以使用es6。
        * 请在半小时内完成。
         
        要求最后输出结果样例如下:
         
        oppor9,2017年06月04日,售出7部
        魅蓝note2,2017年06月07日,售出6部
        魅蓝note2,2017年06月02日,售出5部
        小米2,2017年06月08日,售出5部
        ......
         
        */
 
        function printArray(arr){
          let filterbyType4 = arr.filter((item) => {
                    return item.type == 4;
                })
            let s = new Map();
            let a = [];
            filterbyType4.forEach(element => {
                let date = new Date(element.date)
               let k = element.name +'_'+date.getDay();
               if(s.has(k)){
                   s.get(k).value +  element.value;
               }else{
                   s.set(k,{value:element.value,name:element.name,date:date})
               }
            });
            for(let [key,value] of s){
                a.push(value)
            }
            a.sort((a,b) =>{
                return b.value - a.value
            })
            a.forEach((item) =>{
                console.log(`${item.name} ${item.date.getFullYear()}年${item.date.getMonth()+1}月${item.date.getDay()},售出${item.value}`)
            })
            return a;
        }
        printArray(arr11)
    </script>
</body>
</html>